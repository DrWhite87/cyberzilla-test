import{d as v,u as m,a,h as u}from"./auth-124325ec.js";import{j as h,l as S}from"./_plugin-vue_export-helper-12bcda84.js";const A=v("users",()=>{const c=h({}),r=h({}),n=S({page:1}),i=m(),p=e=>r.value.data.find(s=>s.id===parseInt(e)),o=e=>{var t;if(!((t=r.value)!=null&&t.data))return;let s=r.value.data.findIndex(l=>l.id===e.id);s>-1?r.value.data.splice(s,1,e):r.value.data.push(e)},f=e=>a.get("/api/users/"+e).then(({data:s})=>{s.success&&s.data.user&&(c.value=s.data.user,o(s.data.user))}).catch(s=>{u(s)}),d=()=>{a.get("/api/users?"+new URLSearchParams(n)).then(({data:e})=>{e.success&&e.data.users&&(r.value=e.data.users)}).catch(e=>{u(e)})};return{user:c,users:r,query:n,getOne:p,fetchOne:f,fetchAll:d,update:(e,s)=>a.patch("/api/users/"+e,s).then(({data:t})=>{t.success&&t.data.user&&(o(t.data.user),i.viewer.id===t.data.user.id&&(i.viewer=t.data.user))}).catch(t=>{u(t)}),destroy:e=>{a.delete("/api/users/"+e).then(({data:s})=>{s.success&&d()}).catch(s=>{u(s)})}}},{persist:{paths:["query"]}});export{A as u};
