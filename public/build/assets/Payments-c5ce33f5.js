import{j as g,l as f,_ as C,c as p,J as k,a as d,b as u,t as P,d as n,w as b,F as x,r as h,o as m,f as v,g as S}from"./_plugin-vue_export-helper-12bcda84.js";import{_ as w,a as M}from"./MTColumn-4df841c0.js";import{d as A,a as y,h as _,b as T}from"./auth-124325ec.js";const D=A("payments",()=>{const t=g({}),o=f({page:1}),c=l=>{y.get("/api/users/"+l+"/payments?"+new URLSearchParams(o)).then(({data:s})=>{s.success&&s.data.payments&&(t.value=s.data.payments)}).catch(s=>{_(s)})};return{payments:t,query:o,fetchAll:c,destroy:(l,s)=>{y.delete("/api/payments/"+s).then(({data:e})=>{e.success&&c(l)}).catch(e=>{_(e)})}}},{persist:{paths:["query"]}}),q={name:"Payments",components:{MTColumn:w,MTable:M},setup(){const t=D(),o=p(()=>t.payments),c=p(()=>t.query.sort||""),a=T();return k(()=>{t.fetchAll(a.params.id)}),{payments:o,sort:c,destroy:r=>{if(confirm("Are you sure you want to Delete"))return t.destroy(a.params.id,r)},onPaginationChangePage:r=>{t.query.page=r,t.fetchAll(a.params.id)},onSortChange:r=>{t.query.sort=r,t.fetchAll(a.params.id)}}}},$={class:"container mt-4 mb-2 d-flex justify-content-between align-items-center"},B={class:"mt-2"},N={class:"container p-3 mb-4 bg-white"},V={key:0,class:"d-inline-block px-2 bg-primary text-white"},j={key:1,class:"d-inline-block px-2 bg-info text-white"},E={key:2,class:"d-inline-block px-2 bg-success text-white"},F={key:3,class:"d-inline-block px-2 bg-danger text-white"},R=["onClick"];function J(t,o,c,a,l,s){const e=h("MTColumn"),r=h("MTable");return m(),d(x,null,[u("div",$,[u("h1",B,P(t.$route.meta.title),1),u("button",{type:"button",class:"btn btn-dark btn-block",onClick:o[0]||(o[0]=i=>t.$router.back())}," Back ")]),u("div",N,[n(r,{resources:a.payments,onPaginationChangePage:a.onPaginationChangePage,sort:a.sort,onSortChange:a.onSortChange},{default:b(()=>[n(e,{attribute:"created_at",label:"Date",sortable:!0}),n(e,{attribute:"description",label:"Description"}),n(e,{attribute:"card",label:"Card"}),n(e,{attribute:"amount",label:"Amount",sortable:!0}),n(e,{attribute:"discount",label:"Discount"}),n(e,{attribute:"total",label:"Total",sortable:!0}),n(e,{attribute:"status",label:"Status",sortable:!0},{body:b(({row:i})=>[i.status===1?(m(),d("div",V,"New")):i.status===2?(m(),d("div",j,"Processed")):i.status===3?(m(),d("div",E,"Paid")):i.status===4?(m(),d("div",F,"Cancel")):v("",!0)]),_:1}),n(e,{attribute:"actions",label:"Actions"},{body:b(({row:i})=>[u("a",{href:"",onClick:S(L=>a.destroy(i.id),["prevent"]),class:"text-secondary"},"Delete",8,R)]),_:1})]),_:1},8,["resources","onPaginationChangePage","sort","onSortChange"])])],64)}const H=C(q,[["render",J]]);export{H as default};
