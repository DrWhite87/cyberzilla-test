import{d as f,a as r,h as u}from"./auth-7afe0f1d.js";import{j as d,l as v}from"./_plugin-vue_export-helper-12bcda84.js";const O=f("users",()=>{const c=d({}),a=d({}),n=v({page:1}),h=e=>a.value.data.find(s=>s.id===parseInt(e)),i=e=>{var t;if(!((t=a.value)!=null&&t.data))return;let s=a.value.data.findIndex(l=>l.id===e.id);s>-1?a.value.data.splice(s,1,e):a.value.data.push(e)},p=e=>r.get("/api/users/"+e).then(({data:s})=>{s.success&&s.data.user&&(c.value=s.data.user,i(s.data.user))}).catch(s=>{u(s)}),o=()=>{r.get("/api/users?"+new URLSearchParams(n)).then(({data:e})=>{e.success&&e.data.users&&(a.value=e.data.users)}).catch(e=>{u(e)})};return{user:c,users:a,query:n,getOne:h,fetchOne:p,fetchAll:o,update:(e,s)=>r.patch("/api/users/"+e,s).then(({data:t})=>{t.success&&t.data.user&&i(t.data.user)}).catch(t=>{u(t)}),destroy:e=>{r.delete("/api/users/"+e).then(({data:s})=>{s.success&&o()}).catch(s=>{u(s)})}}},{persist:{paths:["query"]}});export{O as u};
