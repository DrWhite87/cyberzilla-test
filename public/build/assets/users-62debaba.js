import{d as f,u as l,a as t,h as u}from"./auth-da32350c.js";import{j as h,l as v}from"./_plugin-vue_export-helper-b42ff5c8.js";const A=f("users",()=>{const c=h({}),a=h({}),n=v({page:1}),o=l(),p=e=>a.value.data.find(s=>s.id===parseInt(e)),d=e=>t.get("/api/users/"+e).then(({data:s})=>{s.success&&s.data.user&&(c.value=s.data.user)}).catch(s=>{u(s)}),i=()=>{t.get("/api/users?"+new URLSearchParams(n)).then(({data:e})=>{e.success&&e.data.users&&(a.value=e.data.users)}).catch(e=>{u(e)})};return{user:c,users:a,query:n,getOne:p,fetchOne:d,fetchAll:i,store:e=>t.post("/api/users",e).catch(s=>{u(s)}),update:(e,s)=>t.patch("/api/users/"+e,s).then(({data:r})=>{r.success&&r.data.user&&o.viewer.id===r.data.user.id&&(o.viewer=r.data.user)}).catch(r=>{u(r)}),destroy:e=>t.delete("/api/users/"+e).then(({data:s})=>{s.success&&i()}).catch(s=>{u(s)})}},{persist:{paths:["query"]}});export{A as u};
