import{d as l,u as m,a as r,h as a}from"./auth-eb3207ef.js";import{j as h,l as g}from"./_plugin-vue_export-helper-b42ff5c8.js";const q=l("users",()=>{const c=h({}),u=h({}),n=g({page:1}),o=m(),d=s=>u.value.data.find(e=>e.id===parseInt(s)),f=s=>r.get("/api/users/"+s).then(({data:e})=>{e.success&&e.data.user&&(c.value=e.data.user)}).catch(e=>{a(e)}),i=()=>{r.get("/api/users?"+new URLSearchParams(n)).then(({data:s})=>{s.success&&s.data.users&&(u.value=s.data.users)}).catch(s=>{a(s)})};return{user:c,users:u,query:n,getOne:d,fetchOne:f,fetchAll:i,store:s=>r.post("/api/users",s).catch(e=>{a(e)}),update:(s,e)=>r.patch("/api/users/"+s,e).then(({data:t})=>{t.success&&t.data.user&&o.viewer.id===t.data.user.id&&(o.viewer=t.data.user)}).catch(t=>{a(t)}),destroy:s=>r.delete("/api/users/"+s).then(({data:e})=>{e.success&&i()}).catch(e=>{var t,p;e.response.status===422&&((p=(t=e.response)==null?void 0:t.data)!=null&&p.message)&&alert(e.response.data.message),a(e)})}},{persist:{paths:["query"]}});export{q as u};
